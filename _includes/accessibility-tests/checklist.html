<style>
  .usa-checkbox__label {
    padding-left: 1.75rem;
  }
  .usa-checkbox__label::before {
    box-shadow: #454545;
    height:.9rem;
    width:.9rem;
    margin-top: .35rem;
  }

  html {
    scroll-behavior: smooth;
  }

  @media screen and (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }
</style>

<!-- set section titles and descriptions -->
{% assign nav_type = title %}
{% if include.type == "keyboard" %}
  {% assign title = "Keyboard navigation"%}
  {% assign items = component.testItems | where: 'testType', "keyboard" %}
  {% assign nav_type = "keyboard" %}
{% endif %}
{% if include.type == "zoom" %}
  {% assign title = "Zoom magnification"%}
  {% assign items = component.testItems | where: 'testType', "zoom" %}
{% endif %}
{% if include.type == "screenReader" %}
  {% assign title = "Screen reader"%}
  {% assign items = component.testItems | where: 'testType', "screenReader" %}
{% endif %}


<!-- Set shared status icons -->
{% assign pass_icon = 'check_circle' %}
{% assign exceptions_icon = 'warning' %}
{% assign fail_icon = 'cancel' %}
{% assign conditional_icon = 'info' %}

<!--Add checklist intro-->
{% include accessibility-tests/checklist-intros.html %}

<!--Add checklist items-->
<fieldset class="usa-fieldset margin-top-2 maxw-tablet-lg">
  <legend class="usa-legend usa-sr-only">Select passing tests</legend>

  {% for item in items %}
    <!--set WCAG details-->
    {% include accessibility-tests/wcag-details.html %}

    <!--Set version number-->
    {% if item.versionTested %}
      {% assign version_tested = item.versionTested | prepend: 'v' %}
    {% else %}
      {% assign version_tested = "N/A" %}
    {% endif %}

    <!--Set unique id for checkboxes-->
    {% assign checkboxID = item.summary | slugify %}

    <!-- assign test status info -->
    {% if item.testStatus == 'pass' %}
      {% assign status_text = 'Passed' %}
      {% assign status_icon = pass_icon %}
    {% elsif item.testStatus == 'pass-ish' %}
      {% assign status_text = 'Passed with exceptions' %}
      {% assign status_icon = exceptions_icon %}
    {% elsif item.testStatus == 'fail' %}
      {% assign status_text = 'Failed' %}
      {% assign status_icon = fail_icon %}
    {% elsif item.testStatus == 'exempt' %}
      {% assign status_text = 'Conditional' %}
      {% assign status_icon = conditional_icon %}
    {% endif %}
    <!-- start checklist items -->

    <div class="usa-checkbox border-top-1px border-gray-10 margin-top-1" style="background-color:unset">
      <!-- Add text content -->
      <input class="usa-checkbox__input" id="{{ checkboxID }}" type="checkbox" name="historical-figures"
        value='{{ item.summary }}' />
      <label class="usa-checkbox__label margin-bottom-1 display-flex flex-row flex-justify" for="{{ checkboxID }}">
        <div class="measure-5">
          <!--Add summaries-->
          <p class="margin-bottom-1 margin-top-0 line-height-sans-6">
            <strong>{{ item.summary | markdownify | remove: '<p>' | remove: '</p>' }}</strong>
            {{ item.summaryAdditional | markdownify | remove: '<p>' | remove: '</p>' }}
          </p>
          <!--Add supplemental text, based on status type-->
          {% if item.testStatus == 'pass' and item.versionFixed == site.uswds_version %}
            <p class="site-checklist-text site-checklist-text--{{ item.testStatus }}">
              <b>The {{ component_name }} component recently passed this test in version {{ item.versionFixed }}.</b><br />
              <a href="https://github.com/uswds/uswds/releases/tag/v{{ item.versionFixed }}">
                Read more in the {{ item.versionFixed }} release notes
              </a>.
            </p>
          {% elsif item.testStatus == 'pass' %}
          {% elsif item.testStatus == 'pass-ish' %}
            <p class="site-checklist-text site-checklist-text--{{ item.testStatus }}">
              <b>The {{ component_name }} component does not pass all elements of this test.</b>
              {% if item.statusDetails %}
                {{ item.statusDetails }}
                </p>
                <p class="site-checklist-text site-checklist-text--{{ item.testStatus }}">
              {% endif %}
              We have logged this issue and are prioritizing it.
              {% if item.issueNumber %}
                <a href="https://github.com/uswds/{{ item.issueRepo | default:'uswds' }}/issues/{{ item.issueNumber }}">Learn
                more about this issue on GitHub</a>.
              {% endif %}
            </p>
          {% elsif item.testStatus == 'fail' %}
            <p class="site-checklist-text site-checklist-text--{{ item.testStatus }}">
              <b>The {{ component_name }} component does not pass this test.</b>
              We have logged this issue and are prioritizing it.
              {% if  item.issueNumber %}
                <a href="https://github.com/uswds/{{ item.issueRepo | default:'uswds' }}/issues/{{ item.issueNumber }}">Learn
                  more about this issue on GitHub</a>.
              {% endif %}
            </p>
          {% elsif item.testStatus == 'exempt' %}
            <p class="site-checklist-text site-checklist-text--{{ item.testStatus }}">
              <b>{{ item.statusDetails | default:"This can only be tested in your implementation of the component."}}</b>
              Be sure to test this in your project.
            </p>
          {% else %}
            <p class="site-checklist-text site-checklist-text--{{ item.testStatus }}">
              <b>We have not done this test yet.</b><br />
              Make sure you perform this test manually in your project.
            </p>
          {% endif %}
          <!-- end text content -->

          <!--Add tags -->
          <ul class="site-checklist-tag-list">
            {% if item.wcagCriterion %}
              <li class="site-checklist-tag">WCAG {{ criterion_level }}</li>
              <li class="site-checklist-tag">
                <a href="{{ criterion_url }}">
                  {{ item.wcagCriterion }} {{ criterion_name }}
                </a>
              </li>
            {% endif %}
            <li class="site-checklist-tag site-checklist-tag--{{ item.testStatus }} site-checklist-tag--hide-wide">
              <svg class="usa-icon site-checklist-icon--{{ item.testStatus }}"
                aria-hidden="true" role="img">
                <use xlink:href="{{ site.baseurl }}/assets/img/sprite.svg#{{ status_icon }}"></use>
              </svg>
              USWDS test status: <b class="padding-left-05"> {{ status_text }}</b>
            </li>
            <li class="site-checklist-tag site-checklist-tag--hide-wide">Last test: {{ version_tested }}</li>
          </ul>
        </div>
        <ul class="site-checklist-tag-list--aside">
          <li class="site-checklist-tag site-checklist-tag--{{ item.testStatus }}">
            <div class="display-flex flex-align-center flex-justify-end">
              <svg class="usa-icon site-checklist-icon--{{ item.testStatus }}"
              aria-hidden="true" role="img">
                <use xlink:href="{{ site.baseurl }}/assets/img/sprite.svg#{{ status_icon }}"></use>
              </svg>
              USWDS test status:
            </div>
            <b class="padding-left-05"> {{ status_text }}</b>
          </li>
          <li class="site-checklist-tag">Last test: {{ version_tested }}</li>
        </ul>
      </label>
      <!-- end text content -->
    </div>
  {% endfor %}
</fieldset>